
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Iphone Hub - Tu Tienda de Tecnolog√≠a</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&family=Poppins:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
:root {
  --background-color: #0d0f12;
  --surface-color: #1a1c23;
  --primary-color: #00aaff;
  --primary-glow: rgba(0, 170, 255, 0.5);
  --text-primary: #ffffff;
  --text-secondary: #b0c4de;
  --border-color: rgba(0, 170, 255, 0.2);
}
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; }
body {
  font-family: 'Poppins', sans-serif;
  background-color: var(--background-color);
  color: var(--text-primary);
  background-image:
    radial-gradient(circle at 15% 25%, rgba(0, 170, 255, 0.1), transparent 40%),
    radial-gradient(circle at 85% 75%, rgba(0, 170, 255, 0.1), transparent 40%);
}
#root { width: 100%; min-height: 100vh; }
.app-container { width: 100%; max-width: 1400px; margin: 0 auto; padding: 20px; }
@keyframes contentFadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}
.app-header { display: flex; justify-content: space-between; align-items: center; padding: 20px 0; margin-bottom: 20px; border-bottom: 1px solid var(--border-color); }
.logo-container { display: flex; align-items: center; gap: 15px; color: var(--primary-color); }
.logo-icon { filter: drop-shadow(0 0 8px var(--primary-glow)); animation: rotate-logo 20s linear infinite; }
@keyframes rotate-logo { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
.app-title { font-family: 'Orbitron', sans-serif; font-size: 2.5rem; color: var(--primary-color); text-shadow: 0 0 10px var(--primary-glow); cursor: default; margin: 0; }
.header-actions { display: flex; align-items: center; gap: 15px; }
.whatsapp-header-btn { background: transparent; border: none; color: var(--text-secondary); cursor: pointer; padding: 8px; display: flex; align-items: center; justify-content: center; transition: color 0.3s ease; }
.whatsapp-header-btn:hover { color: #25D366; }
.cart-button { position: relative; background: transparent; border: none; color: var(--text-secondary); cursor: pointer; transition: color 0.3s ease; padding: 8px; display: flex; align-items: center; justify-content: center; }
.cart-button:hover { color: var(--primary-color); }
.cart-badge { position: absolute; top: 0; right: 0; background-color: var(--primary-color); color: var(--background-color); width: 22px; height: 22px; border-radius: 50%; display: flex; justify-content: center; align-items: center; font-size: 0.75rem; font-weight: 700; box-shadow: 0 0 10px var(--primary-glow); }
.category-selector { display: flex; justify-content: center; gap: 20px; margin-bottom: 40px; flex-wrap: wrap; }
.category-btn { background-color: transparent; color: var(--text-secondary); border: 2px solid var(--border-color); padding: 12px 24px; border-radius: 8px; font-size: 1rem; font-weight: 500; cursor: pointer; transition: all 0.3s ease; }
.category-btn:hover { color: var(--primary-color); border-color: var(--primary-color); }
.category-btn.active { background-color: var(--primary-color); color: var(--background-color); border-color: var(--primary-color); box-shadow: 0 0 15px var(--primary-glow); }
.main-content { display: flex; flex-direction: column; }
.category-section { width: 100%; animation: contentFadeIn 0.5s ease-in-out; }
.category-title { font-family: 'Orbitron', sans-serif; font-size: 2rem; margin-bottom: 30px; border-left: 4px solid var(--primary-color); padding-left: 15px; }
.product-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 30px; }
.product-card { background-color: var(--surface-color); border-radius: 12px; overflow: hidden; position: relative; padding: 20px; display: flex; flex-direction: column; transition: transform 0.3s ease, box-shadow 0.3s ease; border: 1px solid var(--border-color); }
.product-card:hover { transform: translateY(-8px); box-shadow: 0 10px 30px var(--primary-glow); }
.product-image { width: 100%; height: 250px; object-fit: contain; border-radius: 8px; margin-bottom: 20px; background-color: #2a2d35; }
.product-info { flex-grow: 1; display: flex; flex-direction: column; }
.product-name { font-size: 1.4rem; font-weight: 700; margin-bottom: 10px; }
.product-description { font-size: 0.9rem; color: var(--text-secondary); line-height: 1.5; margin-bottom: 20px; flex-grow: 1; }
.product-footer { display: flex; justify-content: space-between; align-items: center; margin-top: auto; }
.color-selector { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 20px; justify-content: flex-start; }
.color-swatch { padding: 4px 12px; border: 1px solid var(--border-color); border-radius: 15px; cursor: pointer; font-size: 0.8rem; transition: all 0.3s ease; user-select: none; }
.color-swatch:hover { border-color: var(--primary-color); color: var(--primary-color); }
.color-swatch.selected { background-color: var(--primary-color); color: var(--background-color); border-color: var(--primary-color); font-weight: 500; }

.product-details-toggle { display: flex; align-items: center; justify-content: center; gap: 8px; color: var(--text-secondary); cursor: pointer; margin: 15px 0; font-size: 0.9rem; transition: color 0.3s ease; }
.product-details-toggle:hover { color: var(--primary-color); }
.product-details-toggle svg { transition: transform 0.3s ease; }
.product-card.expanded .product-details-toggle svg { transform: rotate(180deg); }
.product-details-content { max-height: 0; overflow: hidden; transition: max-height 0.5s ease-in-out, padding 0.5s ease-in-out; padding-top: 0; padding-bottom: 0; }
.product-card.expanded .product-details-content { max-height: 500px; /* Adjust as needed */ padding-top: 10px; padding-bottom: 10px; }
.details-list { list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 12px; }
.details-list li { display: flex; flex-direction: column; }
.details-list strong { font-weight: 500; color: var(--text-primary); font-size: 0.9rem; margin-bottom: 4px; }
.details-list span { font-size: 0.85rem; color: var(--text-secondary); line-height: 1.4; }
.product-price { font-size: 1.5rem; font-weight: 700; color: var(--primary-color); }
.add-to-cart-btn { background-color: transparent; color: var(--primary-color); border: 2px solid var(--primary-color); padding: 10px 20px; border-radius: 8px; font-weight: 700; cursor: pointer; transition: background-color 0.3s ease, color 0.3s ease, box-shadow 0.3s ease; }
.add-to-cart-btn:hover { background-color: var(--primary-color); color: var(--background-color); box-shadow: 0 0 15px var(--primary-glow); }
.cart-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.6); z-index: 1000; opacity: 0; visibility: hidden; transition: opacity 0.3s ease, visibility 0s 0.3s linear; }
.cart-overlay.open { opacity: 1; visibility: visible; transition: opacity 0.3s ease; }
.cart-sidebar { position: fixed; top: 0; right: -450px; width: 450px; height: 100%; background-color: var(--surface-color); z-index: 1001; box-shadow: -10px 0 30px rgba(0, 0, 0, 0.3); transition: right 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94); display: flex; flex-direction: column; border-left: 1px solid var(--border-color); }
.cart-sidebar.open { right: 0; }
.cart-header { display: flex; justify-content: space-between; align-items: center; padding: 20px; border-bottom: 1px solid var(--border-color); flex-shrink: 0; }
.cart-header h2 { font-family: 'Orbitron', sans-serif; font-size: 1.5rem; margin: 0; }
.close-cart-btn { background: none; border: none; font-size: 2.5rem; color: var(--text-secondary); cursor: pointer; line-height: 1; padding: 0; transition: color 0.3s ease, transform 0.3s ease; }
.close-cart-btn:hover { color: var(--primary-color); transform: rotate(90deg); }
.cart-items { flex-grow: 1; overflow-y: auto; padding: 20px; }
.empty-cart-message { text-align: center; color: var(--text-secondary); font-size: 1.1rem; padding-top: 40px; }
.cart-item { display: flex; gap: 15px; margin-bottom: 20px; position: relative; }
.cart-item-image { width: 80px; height: 80px; object-fit: contain; border-radius: 8px; flex-shrink: 0; }
.cart-item-details { flex-grow: 1; display: flex; flex-direction: column; justify-content: space-between; }
.cart-item-name { font-size: 1rem; font-weight: 500; margin: 0 0 5px; }
.cart-item-price { font-size: 0.9rem; color: var(--text-secondary); margin: 0; }
.cart-item-color { font-size: 0.85rem; color: var(--text-secondary); margin-top: 4px; }
.quantity-controls { display: flex; align-items: center; gap: 10px; margin-top: 10px; }
.quantity-controls button { background-color: var(--background-color); border: 1px solid var(--border-color); color: var(--text-primary); width: 28px; height: 28px; border-radius: 50%; cursor: pointer; font-size: 1rem; display: flex; justify-content: center; align-items: center; transition: background-color 0.3s ease, border-color 0.3s ease; }
.quantity-controls button:hover { background-color: var(--primary-color); border-color: var(--primary-color); color: var(--background-color); }
.quantity-controls span { font-weight: 500; min-width: 20px; text-align: center; }
.remove-item-btn { position: absolute; top: 0; right: 0; background: none; border: none; color: var(--text-secondary); font-size: 1.5rem; cursor: pointer; line-height: 1; transition: color 0.3s ease, transform 0.3s ease; }
.remove-item-btn:hover { color: #ff4d4d; transform: scale(1.2); }
.cart-footer { padding: 20px; border-top: 1px solid var(--border-color); background-color: var(--surface-color); flex-shrink: 0; }
.discount-promo-message { background-color: rgba(0, 170, 255, 0.1); border: 1px solid var(--border-color); border-radius: 8px; padding: 12px; margin-bottom: 20px; text-align: center; font-size: 0.9rem; color: var(--primary-color); }
.cart-summary-row { display: flex; justify-content: space-between; font-size: 1rem; color: var(--text-secondary); margin-bottom: 10px; }
.cart-summary-row.discount span:last-child { color: #4caf50; font-weight: 500; }
.cart-total { display: flex; justify-content: space-between; font-size: 1.2rem; font-weight: 700; margin-bottom: 20px; }
.cart-summary-row ~ .cart-total, .cart-total.with-discount { margin-top: 15px; padding-top: 15px; border-top: 1px dashed var(--border-color); }
.cart-total span:last-child { color: var(--primary-color); }
.checkout-btn { width: 100%; background-color: var(--primary-color); color: var(--background-color); border: none; padding: 15px; border-radius: 8px; font-size: 1.1rem; font-weight: 700; cursor: pointer; transition: background-color 0.3s ease, box-shadow 0.3s ease; }
.checkout-btn:hover { background-color: #00bfff; box-shadow: 0 0 20px var(--primary-glow); }
@keyframes modalFadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
.checkout-modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0, 0, 0, 0.7); z-index: 2000; display: flex; justify-content: center; align-items: center; }
.checkout-modal { background-color: var(--surface-color); border-radius: 12px; border: 1px solid var(--border-color); box-shadow: 0 10px 40px rgba(0,0,0,0.5); width: 90%; max-width: 500px; animation: modalFadeIn 0.3s cubic-bezier(0.165, 0.84, 0.44, 1); }
.checkout-modal-header { display: flex; justify-content: space-between; align-items: center; padding: 20px 25px; border-bottom: 1px solid var(--border-color); }
.checkout-modal-header h3 { font-family: 'Orbitron', sans-serif; font-size: 1.4rem; margin: 0; }
.checkout-modal-close-btn { background: none; border: none; font-size: 2rem; color: var(--text-secondary); cursor: pointer; line-height: 1; transition: color 0.3s ease, transform 0.3s ease; }
.checkout-modal-close-btn:hover { color: var(--primary-color); transform: rotate(90deg); }
.checkout-modal-body { padding: 25px; }
.checkout-total-display { background-color: var(--background-color); border-radius: 8px; padding: 15px 20px; margin-bottom: 25px; display: flex; justify-content: space-between; align-items: center; font-size: 1.1rem; }
.checkout-total-display strong { font-size: 1.5rem; color: var(--primary-color); font-weight: 700; }
.payment-options { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
.payment-option-btn { background-color: transparent; border: 2px solid var(--border-color); color: var(--text-secondary); padding: 20px; border-radius: 8px; font-size: 1rem; font-weight: 500; cursor: pointer; transition: all 0.3s ease; text-align: center; }
.payment-option-btn:hover { background-color: var(--primary-color); color: var(--background-color); border-color: var(--primary-color); box-shadow: 0 0 15px var(--primary-glow); }
@keyframes confirmationFadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
.payment-confirmation-view { text-align: center; animation: confirmationFadeIn 0.4s ease-out; }
.card-payment-view { animation: confirmationFadeIn 0.4s ease-out; }
.card-form { display: flex; flex-direction: column; gap: 15px; }
.card-form .form-group { display: flex; flex-direction: column; }
.card-form label { font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 5px; }
.card-form input { background-color: var(--background-color); border: 1px solid var(--border-color); color: var(--text-primary); padding: 12px; border-radius: 6px; font-size: 1rem; }
.card-form .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
.card-form .submit-card-btn { background-color: var(--primary-color); color: var(--background-color); border: none; padding: 15px; border-radius: 8px; font-size: 1.1rem; font-weight: 700; cursor: pointer; transition: background-color 0.3s ease, box-shadow 0.3s ease; margin-top: 10px; }
.card-form .submit-card-btn:hover { background-color: #00bfff; box-shadow: 0 0 20px var(--primary-glow); }

.confirmation-text { color: var(--text-secondary); font-size: 1rem; line-height: 1.6; margin-bottom: 25px; }
.confirmation-text strong { color: var(--primary-color); font-weight: 500; }
.whatsapp-btn { width: 100%; background-color: #25D366; color: var(--text-primary); border: none; padding: 15px; border-radius: 8px; font-size: 1.1rem; font-weight: 700; cursor: pointer; transition: background-color 0.3s ease, box-shadow 0.3s ease; margin-bottom: 15px; display: flex; justify-content: center; align-items: center; gap: 10px; }
.whatsapp-btn:hover { background-color: #128C7E; box-shadow: 0 0 20px rgba(37, 211, 102, 0.5); }
.back-btn { background: none; border: none; color: var(--text-secondary); cursor: pointer; font-size: 0.9rem; font-weight: 500; transition: color 0.3s ease; }
.back-btn:hover { color: var(--primary-color); text-decoration: underline; }
.app-footer { text-align: center; padding: 40px 20px; margin-top: 40px; border-top: 1px solid var(--border-color); color: var(--text-secondary); }
.app-footer p { margin: 0; display: flex; justify-content: center; align-items: center; gap: 10px; }
.app-footer a { color: var(--primary-color); text-decoration: none; transition: text-decoration 0.3s ease, color 0.3s ease; font-weight: 500; }
.app-footer a:hover { text-decoration: underline; color: #00bfff; }
.app-footer svg { width: 20px; height: 20px; stroke: var(--text-secondary); transition: stroke 0.3s ease; }
.app-footer p:hover svg { stroke: var(--primary-color); }

/* --- MEDIA QUERIES --- */
@media (max-width: 768px) {
  .app-title { font-size: 2rem; }
  .logo-icon { width: 40px; height: 40px; }
  .category-btn { padding: 10px 20px; font-size: 0.9rem; }
  .category-title { font-size: 1.8rem; }
  .product-grid { gap: 20px; }
  .product-name { font-size: 1.2rem; }
  .product-price { font-size: 1.3rem; }
}
@media (max-width: 480px) {
  .app-container { padding: 15px; }
  .logo-container { gap: 10px; }
  .logo-icon { width: 32px; height: 32px; }
  .app-title { font-size: 1.8rem; }
  .header-actions { gap: 5px; }
  .category-selector { gap: 10px; }
  .category-btn { padding: 8px 12px; font-size: 0.8rem; width: calc(33.333% - 10px); text-align: center; }
  .main-content { gap: 40px; }
  .category-title { font-size: 1.5rem; margin-bottom: 20px; }
  .product-grid { gap: 15px; }
  .product-image { height: 200px; }
  .add-to-cart-btn { padding: 8px 16px; font-size: 0.9rem; }
  .cart-sidebar { width: 100vw; right: -100vw; }
  .payment-options { grid-template-columns: 1fr; }
  .payment-option-btn { padding: 15px; }
}
    </style>
</head>
<body>
    <div id="root">
        <div class="app-container">
            <header class="app-header">
                <div class="logo-container">
                    <svg class="logo-icon" width="48" height="48" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="32" cy="32" r="14" stroke="currentColor" stroke-width="3"></circle>
                        <ellipse cx="32" cy="32" rx="28" ry="10" stroke="currentColor" stroke-width="3"></ellipse>
                    </svg>
                    <h1 class="app-title">Iphone Hub</h1>
                </div>
                <div class="header-actions">
                    <button id="whatsapp-header-btn" class="whatsapp-header-btn" aria-label="Cont√°ctanos en WhatsApp">
                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="currentColor"><path d="M.057 24l1.687-6.163c-1.041-1.804-1.588-3.849-1.587-5.946.003-6.556 5.338-11.891 11.893-11.891 3.181.001 6.167 1.24 8.413 3.488 2.245 2.248 3.481 5.236 3.48 8.414-.003 6.557-5.338 11.892-11.894 11.892-1.99-.001-3.951-.5-5.688-1.448l-6.305 1.654zm6.597-3.807c1.676.995 3.276 1.591 5.392 1.592 5.448 0 9.886-4.434 9.889-9.885.002-5.462-4.415-9.89-9.881-9.892-5.452 0-9.887 4.434-9.889 9.884-.001 2.225.651 3.891 1.746 5.634l-.999 3.648 3.742-.981zm11.387-5.464c-.074-.124-.272-.198-.57-.347-.297-.149-1.758-.868-2.031-.967-.272-.099-.47-.149-.669.149-.198.297-.768.967-.941 1.165-.173.198-.347.223-.644.074-.297-.149-1.255-.462-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.297-.347.446-.521.151-.172.2-.296.3-.495.099-.198.05-.372-.025-.521-.075-.148-.669-1.611-.916-2.206-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01s-.521.074-.792.372c-.272.296-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.203 5.076 4.487.709.306 1.262.489 1.694.626.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.695.248-1.29.173-1.414z"/></svg>
                    </button>
                    <button class="cart-button" id="cart-button" aria-label="Abrir carrito de compras">
                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg>
                        <span class="cart-badge" id="cart-badge" style="display: none;">0</span>
                    </button>
                </div>
            </header>
            <nav id="category-selector" class="category-selector"></nav>
            <main class="main-content">
                <section class="category-section">
                    <h2 class="category-title" id="category-title"></h2>
                    <div class="product-grid" id="product-grid"></div>
                </section>
            </main>
            <footer class="app-footer">
                <p> 
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
                    <span>Contacto:</span>
                    <a href="mailto:applesuporr@gmail.com">applesuporr@gmail.com</a>
                </p>
            </main>
        </div>
        <div id="cart-overlay" class="cart-overlay"></div>
        <aside id="cart-sidebar" class="cart-sidebar">
            <div class="cart-header">
                <h2>Tu Carrito</h2>
                <button id="close-cart-btn" class="close-cart-btn">&times;</button>
            </div>
            <div id="cart-items" class="cart-items"></div>
            <div id="cart-footer" class="cart-footer" style="display: none;"></div>
        </aside>
        <div id="checkout-modal-overlay" class="checkout-modal-overlay" style="display: none;">
            <div id="checkout-modal" class="checkout-modal">
                <div class="checkout-modal-header">
                    <h3 id="modal-title">Selecciona un M√©todo de Pago</h3>
                    <button id="checkout-modal-close-btn" class="checkout-modal-close-btn">&times;</button>
                </div>
                <div class="checkout-modal-body">
                    <div class="checkout-total-display">
                        <span>Monto Total</span>
                        <strong id="checkout-total">$0.00</strong>
                    </div>
                    <div id="payment-options" class="payment-options">
                        <button class="payment-option-btn">TRC20</button>
                        <button class="payment-option-btn">USDT</button>
                        <button class="payment-option-btn">Bitcoin</button>
                        <button class="payment-option-btn">Tarjeta</button>
                    </div>
                    <div id="card-payment-view" class="card-payment-view" style="display: none;">
                        <form id="card-form" class="card-form">
                            <div class="form-group">
                                <label for="card-number">N√∫mero de Tarjeta</label>
                                <input type="text" id="card-number" name="card-number" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢ ‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
                            </div>
                            <div class="form-group">
                                <label for="card-name">Nombre del Titular</label>
                                <input type="text" id="card-name" name="card-name" placeholder="John M. Doe" required>
                            </div>
                            <div class="form-row">
                                <input type="text" id="card-expiry" name="card-expiry" placeholder="MM/AA" required>
                                <input type="text" id="card-cvc" name="card-cvc" placeholder="CVC" required maxlength="3">
                            </div>
                            <div class="form-group">
                                <label for="card-document-number">N√∫mero de Documento (DNI, etc.)</label>
                                <input type="text" id="card-document-number" name="card-document-number" placeholder="Ingresa tu n√∫mero de documento" required>
                            </div>
                            <button type="submit" class="submit-card-btn">
                                <span class="btn-text">Confirmar Datos de Pago</span>
                                <span class="spinner" style="display: none;"></span>
                            </button>
                        </form>
                        <button id="back-btn-card" class="back-btn" style="margin-top: 15px;">&larr; Elegir otro m√©todo</button>
                    </div>
                    <div id="payment-confirmation-view" class="payment-confirmation-view" style="display: none;">
                        <p id="confirmation-text" class="confirmation-text"></p>
                        <button id="whatsapp-pay-btn" class="whatsapp-btn">Pagar con WhatsApp</button>
                        <button id="back-btn" class="back-btn">&larr; Elegir otro m√©todo</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script>
        // Los datos de products.json ahora est√°n incrustados directamente aqu√≠
        const productsData = {
            "iphones": {
                "title": "iPhones",
                "data": [
                    { "id": 1, "name": "iPhone 15 Pro", "description": "Chip A17 Pro. Sistema de c√°maras Pro. Dise√±o de titanio. La experiencia iPhone definitiva.", "price": "$999", "imageUrl": "https://entel.cdn.modyo.com/uploads/0050a0ad-3320-4a60-b52f-3a6c8af00200/original/apple-iphone-15-pro-natural-2.png", "colors": ["Titanio Natural", "Titanio Azul", "Titanio Blanco", "Titanio Negro"], "details": { "camera": "Sistema de c√°maras Pro (48MP principal, 12MP ultra gran angular, 12MP teleobjetivo 2x y 3x), modo Cine 4K HDR Dolby Vision, grabaci√≥n de video ProRes.", "screen": "Super Retina XDR de 6.1\", ProMotion con tasa de refresco adaptativa de hasta 120Hz, Dynamic Island.", "specs": "Chip A17 Pro, CPU de 6 n√∫cleos, GPU de 6 n√∫cleos, Neural Engine de 16 n√∫cleos.", "battery": "Hasta 23 horas de reproducci√≥n de video. Carga r√°pida y MagSafe.", "sim": "Dual SIM (nano-SIM y eSIM). Compatible con doble eSIM.", "connectivity": "5G, Wi-Fi 6E, Bluetooth 5.3, USB-C con velocidades de USB 3." } },
                    { "id": 2, "name": "iPhone 15", "description": "Dynamic Island. Chip A16 Bionic. Un impresionante sistema de doble c√°mara. Todo en un dise√±o duradero.", "price": "$799", "imageUrl": "https://www.apple.com/newsroom/images/2023/09/apple-debuts-iphone-15-and-iphone-15-plus/article/Apple-iPhone-15-lineup-hero-geo-230912_inline.jpg.small_2x.jpg", "colors": ["Rosado", "Amarillo", "Verde", "Azul", "Negro"], "details": { "camera": "Sistema de doble c√°mara (48MP principal, 12MP ultra gran angular), modo Cine 4K HDR, Photonic Engine.", "screen": "Super Retina XDR de 6.1\", Dynamic Island, brillo m√°ximo de 2000 nits.", "specs": "Chip A16 Bionic, CPU de 6 n√∫cleos, GPU de 5 n√∫cleos.", "battery": "Hasta 20 horas de reproducci√≥n de video.", "sim": "Dual SIM (nano-SIM y eSIM).", "connectivity": "5G, Wi-Fi 6, Bluetooth 5.3, USB-C." } },
                    { "id": 10, "name": "iPhone 14 Pro", "description": "Dynamic Island, pantalla siempre activa y el potente chip A16 Bionic. Un gran salto para el iPhone.", "price": "$899", "imageUrl": "https://laplatacells.com.ar/img/Public/1169/62057-producto-iphone-14-pro-space-black-pdp-image-position-1a-mxla.jpg", "colors": ["Morado Oscuro", "Oro", "Plata", "Negro Espacial"], "details": { "camera": "Sistema de c√°maras Pro (48MP principal, 12MP ultra gran angular, 12MP teleobjetivo), modo Cine 4K.", "screen": "Super Retina XDR de 6.1\", ProMotion, Dynamic Island, Pantalla siempre activa.", "specs": "Chip A16 Bionic, CPU de 6 n√∫cleos, GPU de 5 n√∫cleos.", "battery": "Hasta 23 horas de reproducci√≥n de video.", "sim": "Dual SIM (nano-SIM y eSIM).", "connectivity": "5G, Wi-Fi 6, Bluetooth 5.3, Conector Lightning." } },
                    { "id": 11, "name": "iPhone 14", "description": "Funciones de seguridad vitales, un dise√±o duradero y un sistema de doble c√°mara mejorado para fotos impresionantes.", "price": "$699", "imageUrl": "https://cdn-ipoint.waugi.com.ar/25214-large_default/iphone-14-256gb-midnight.jpg", "colors": ["Azul", "Morado", "Medianoche", "Blanco Estelar", "Rojo"], "details": { "camera": "Sistema de doble c√°mara de 12MP (principal y ultra gran angular), Photonic Engine.", "screen": "Super Retina XDR de 6.1\", True Tone.", "specs": "Chip A15 Bionic, CPU de 6 n√∫cleos, GPU de 5 n√∫cleos.", "battery": "Hasta 20 horas de reproducci√≥n de video.", "sim": "Dual SIM (nano-SIM y eSIM).", "connectivity": "5G, Wi-Fi 6, Bluetooth 5.3, Conector Lightning." } },
                    { "id": 12, "name": "iPhone 13", "description": "Chip A15 Bionic, pantalla s√∫per brillante y un gran salto en la duraci√≥n de la bater√≠a. Un iPhone muy potente.", "price": "$599", "imageUrl": "https://www.apple.com/newsroom/images/product/iphone/geo/Apple_iphone13_hero_geo_09142021_inline.jpg.small_2x.jpg", "colors": ["Verde", "Rosado", "Azul", "Medianoche", "Blanco Estelar"], "details": { "camera": "Sistema de doble c√°mara de 12MP (principal y ultra gran angular), Estilos Fotogr√°ficos, modo Cine.", "screen": "Super Retina XDR de 6.1\", Ceramic Shield.", "specs": "Chip A15 Bionic, CPU de 6 n√∫cleos, GPU de 4 n√∫cleos.", "battery": "Hasta 19 horas de reproducci√≥n de video.", "sim": "Dual SIM (nano-SIM y eSIM).", "connectivity": "5G, Wi-Fi 6, Bluetooth 5.0, Conector Lightning." } },
                    { "id": 3, "name": "iPhone SE", "description": "Potencia seria con el chip A15 Bionic. Dise√±o compacto. Una gran entrada al ecosistema de Apple.", "price": "$429", "imageUrl": "https://www.apple.com/newsroom/images/product/iphone/standard/Apple_new-iphone-se-white_04152020_big.jpg.small_2x.jpg", "colors": ["Medianoche", "Blanco Estelar", "Rojo"], "details": { "camera": "C√°mara gran angular de 12MP, HDR Inteligente 4, modo Retrato.", "screen": "Pantalla Retina HD de 4.7\", True Tone.", "specs": "Chip A15 Bionic, CPU de 6 n√∫cleos, GPU de 4 n√∫cleos.", "battery": "Hasta 15 horas de reproducci√≥n de video.", "sim": "Dual SIM (nano-SIM y eSIM).", "connectivity": "5G, Wi-Fi 6, Bluetooth 5.0, Conector Lightning." } },
                    { "id": 13, "name": "iPhone 12", "description": "A14 Bionic, el chip m√°s r√°pido en un smartphone. Una pantalla OLED de borde a borde. Ceramic Shield.", "price": "$499", "imageUrl": "https://www.apple.com/newsroom/images/product/iphone/geo/apple_iphone-12_2-up_geo_10132020_inline.jpg.small_2x.jpg", "colors": ["Morado", "Verde", "Azul", "Blanco", "Negro"], "details": { "camera": "Sistema de doble c√°mara de 12MP (principal y ultra gran angular), modo Noche.", "screen": "Super Retina XDR de 6.1\", Ceramic Shield.", "specs": "Chip A14 Bionic con Neural Engine de 16 n√∫cleos.", "battery": "Hasta 17 horas de reproducci√≥n de video.", "sim": "Dual SIM (nano-SIM y eSIM).", "connectivity": "5G, Wi-Fi 6, Bluetooth 5.0, Conector Lightning." } },
                    { "id": 14, "name": "iPhone 11", "description": "Sistema de doble c√°mara, modo Noche y el chip A13 Bionic. Un iPhone de gran valor.", "price": "$399", "imageUrl": "https://m.media-amazon.com/images/I/71vIhOeEIdL._AC_UF894,1000_QL80_FMwebp_.jpg", "colors": ["Verde", "Morado", "Amarillo", "Blanco", "Negro"], "details": { "camera": "Sistema de doble c√°mara de 12MP (principal y ultra gran angular), modo Noche.", "screen": "Pantalla Liquid Retina HD de 6.1\".", "specs": "Chip A13 Bionic con Neural Engine de 8 n√∫cleos.", "battery": "Hasta 17 horas de reproducci√≥n de video.", "sim": "Dual SIM (nano-SIM y eSIM).", "connectivity": "4G LTE Advanced, Wi-Fi 6, Bluetooth 5.0, Conector Lightning." } },
                    { "id": 15, "name": "iPhone XR", "description": "Pantalla Liquid Retina, Face ID y un potente chip A12 Bionic. Brillante en todos los sentidos.", "price": "$299", "imageUrl": "https://www.apple.com/newsroom/images/product/iphone/standard/iPhone_XR_white-back_09122018_carousel.jpg.small_2x.jpg", "colors": ["Coral", "Azul", "Amarillo", "Blanco", "Negro"], "details": { "camera": "C√°mara de 12MP (gran angular), modo Retrato, Control de Profundidad.", "screen": "Pantalla Liquid Retina HD de 6.1\".", "specs": "Chip A12 Bionic con Neural Engine de 2¬™ generaci√≥n.", "battery": "Hasta 16 horas de reproducci√≥n de video.", "sim": "Dual SIM (nano-SIM y eSIM).", "connectivity": "4G LTE, Wi-Fi 5, Bluetooth 5.0, Conector Lightning." } },
                    { "id": 16, "name": "iPhone 8", "description": "Dise√±o de vidrio, pantalla Retina HD y el chip A11 Bionic. Un dise√±o cl√°sico con potencia moderna.", "price": "$199", "imageUrl": "https://www.apple.com/newsroom/images/product/iphone/standard/8plus_and_8_glass_back_big.jpg.small_2x.jpg", "colors": ["Oro", "Plata", "Gris Espacial"], "details": { "camera": "C√°mara de 12MP, grabaci√≥n de video 4K.", "screen": "Pantalla Retina HD de 4.7\", Touch ID.", "specs": "Chip A11 Bionic con Neural Engine.", "battery": "Hasta 13 horas de reproducci√≥n de video.", "sim": "Una nano-SIM.", "connectivity": "4G LTE, Wi-Fi 5 (802.11ac), Bluetooth 5.0, Conector Lightning." } },
                    { "id": 17, "name": "iPhone 7", "description": "Un sistema de c√°mara avanzado, el mejor rendimiento y duraci√≥n de bater√≠a en un iPhone, y altavoces est√©reo.", "price": "$149", "imageUrl": "https://wefix.co.za/cdn/shop/products/iphone-7-Rose-gold_2_48ef5f00-a2b9-40e5-b6fc-31ce0da1450e.png?v=1639151496&width=1900", "colors": ["Oro Rosa", "Oro", "Plata", "Negro Brillante"], "details": { "camera": "C√°mara de 12MP, estabilizaci√≥n √≥ptica de imagen.", "screen": "Pantalla Retina HD de 4.7\", Touch ID.", "specs": "Chip A10 Fusion.", "battery": "Hasta 13 horas de reproducci√≥n de video.", "sim": "Una nano-SIM.", "connectivity": "4G LTE, Wi-Fi 5 (802.11ac), Bluetooth 4.2, Conector Lightning." } }
                ]
            },
            "iphones-b-stock": {
                "title": "iPhones (50% Descuento)",
                "data": [
                    { "id": 18, "name": "iPhone 14 (Falla de F√°brica)", "description": "Nota: Esta unidad tiene un defecto cosm√©tico menor en la carcasa, pero es completamente funcional. Se vende con un 50% de descuento. Incluye funciones de seguridad vitales y un sistema de doble c√°mara mejorado.", "price": "$349.50", "imageUrl": "https://cdn-ipoint.waugi.com.ar/25214-large_default/iphone-14-256gb-midnight.jpg", "colors": ["Medianoche"], "details": { "camera": "Sistema de doble c√°mara de 12MP (principal y ultra gran angular), Photonic Engine.", "screen": "Super Retina XDR de 6.1\", True Tone.", "specs": "Chip A15 Bionic, CPU de 6 n√∫cleos, GPU de 5 n√∫cleos.", "battery": "Hasta 20 horas de reproducci√≥n de video.", "sim": "Dual SIM (nano-SIM y eSIM).", "connectivity": "5G, Wi-Fi 6, Bluetooth 5.3, Conector Lightning." } },
                    { "id": 19, "name": "iPhone 13 (Falla de F√°brica)", "description": "Nota: Esta unidad tiene una peque√±a anomal√≠a de p√≠xeles en el borde de la pantalla, pero es completamente funcional. Se vende con un 50% de descuento. Cuenta con el chip A15 Bionic y una pantalla s√∫per brillante.", "price": "$299.50", "imageUrl": "https://www.apple.com/newsroom/images/product/iphone/geo/Apple_iphone13_hero_geo_09142021_inline.jpg.small_2x.jpg", "colors": ["Azul"], "details": { "camera": "Sistema de doble c√°mara de 12MP (principal y ultra gran angular), Estilos Fotogr√°ficos, modo Cine.", "screen": "Super Retina XDR de 6.1\", Ceramic Shield.", "specs": "Chip A15 Bionic, CPU de 6 n√∫cleos, GPU de 4 n√∫cleos.", "battery": "Hasta 19 horas de reproducci√≥n de video.", "sim": "Dual SIM (nano-SIM y eSIM).", "connectivity": "5G, Wi-Fi 6, Bluetooth 5.0, Conector Lightning." } },
                    { "id": 20, "name": "iPhone 12 (Falla de F√°brica)", "description": "Nota: Esta unidad tiene un rasgu√±o menor en el cristal trasero, pero es completamente funcional. Se vende con un 50% de descuento. Cuenta con el chip A14 Bionic y una pantalla OLED de borde a borde.", "price": "$249.50", "imageUrl": "https://www.apple.com/newsroom/images/product/iphone/geo/apple_iphone-12_2-up_geo_10132020_inline.jpg.small_2x.jpg", "colors": ["Blanco"], "details": { "camera": "Sistema de doble c√°mara de 12MP (principal y ultra gran angular), modo Noche.", "screen": "Super Retina XDR de 6.1\", Ceramic Shield.", "specs": "Chip A14 Bionic.", "battery": "Hasta 17 horas de reproducci√≥n de video.", "sim": "Dual SIM (nano-SIM y eSIM).", "connectivity": "5G, Wi-Fi 6, Bluetooth 5.0, Conector Lightning." } },
                    { "id": 21, "name": "iPhone 11 (Falla de F√°brica)", "description": "Nota: Esta unidad tiene una ligera decoloraci√≥n en el marco, pero es completamente funcional. Se vende con un 50% de descuento. Cuenta con un sistema de doble c√°mara con modo Noche y el chip A13 Bionic.", "price": "$199.50", "imageUrl": "https://m.media-amazon.com/images/I/71vIhOeEIdL._AC_UF894,1000_QL80_FMwebp_.jpg", "colors": ["Negro"], "details": { "camera": "Sistema de doble c√°mara de 12MP (principal y ultra gran angular), modo Noche.", "screen": "Pantalla Liquid Retina HD de 6.1\".", "specs": "Chip A13 Bionic.", "battery": "Hasta 17 horas de reproducci√≥n de video.", "sim": "Dual SIM (nano-SIM y eSIM).", "connectivity": "4G LTE Advanced, Wi-Fi 6, Bluetooth 5.0, Conector Lightning." } }
                ]
            },
            "gaming-pcs": {
                "title": "PCs Gamer",
                "data": [
                    { "id": 4, "name": "CyberPower Xtreme", "description": "Intel Core i9, NVIDIA RTX 4090, 32GB RAM DDR5, 2TB SSD NVMe. Desata el dominio puro en los juegos.", "price": "$3,499", "imageUrl": "https://m.media-amazon.com/images/I/71K4CkU04bL._AC_UF1000,1000_QL80_FMwebp_.jpg", "colors": ["Negro"], "details": { "CPU": "Intel Core i9 (√∫ltima generaci√≥n)", "GPU": "NVIDIA GeForce RTX 4090 24GB GDDR6X", "RAM": "32GB DDR5 a 5600MHz", "Almacenamiento": "2TB NVMe PCIe Gen4 SSD", "Sistema Operativo": "Windows 11 Home" } },
                    { "id": 5, "name": "iBUYPOWER Pro", "description": "AMD Ryzen 7, NVIDIA RTX 4070, 16GB RAM DDR5, 1TB SSD NVMe. Rendimiento de gama alta por menos.", "price": "$1,899", "imageUrl": "https://m.media-amazon.com/images/I/7128GOUxSCL._AC_SL1500_.jpg", "colors": ["Negro", "Blanco"], "details": { "CPU": "AMD Ryzen 7 (serie 7000)", "GPU": "NVIDIA GeForce RTX 4070 12GB GDDR6X", "RAM": "16GB DDR5 a 5200MHz", "Almacenamiento": "1TB NVMe PCIe Gen4 SSD", "Sistema Operativo": "Windows 11 Home" } },
                    { "id": 6, "name": "Alienware Aurora R16", "description": "El dise√±o futurista se une a la potencia de √∫ltima generaci√≥n. Intel Core i7, RTX 4060, 16GB de RAM para una experiencia premium.", "price": "$1,599", "imageUrl": "https://m.media-amazon.com/images/I/71C+ewM2JjL._AC_SL1500_.jpg", "colors": ["Blanco Lunar", "Negro C√≥smico"], "details": { "CPU": "Intel Core i7 (√∫ltima generaci√≥n)", "GPU": "NVIDIA GeForce RTX 4060 8GB GDDR6", "RAM": "16GB DDR5 a 5600MHz", "Almacenamiento": "1TB NVMe PCIe Gen4 SSD", "Sistema Operativo": "Windows 11 Home" } }
                ]
            },
            "accessories": {
                "title": "Accesorios",
                "data": [
                    { "id": 7, "name": "Spigen Tempered Glass", "description": "Protector de pantalla de dureza 9H con revestimiento oleof√≥bico. Transparente y f√°cil de instalar.", "price": "$15.99", "imageUrl": "https://www.spigen.com/cdn/shop/products/title_web_ip6.7p_ezfitsp_01.jpg?v=1695081006&width=990", "colors": ["Transparente"], "details": { "Compatibilidad": "Compatible con la mayor√≠a de los modelos de iPhone (verificar modelo espec√≠fico).", "Material": "Vidrio templado de alta calidad.", "Dureza": "9H para resistencia a ara√±azos.", "Caracter√≠sticas": "Revestimiento oleof√≥bico, aplicador EZ Fit para instalaci√≥n f√°cil." } },
                    { "id": 8, "name": "ESR Armorite Glass", "description": "Protecci√≥n de pantalla ultrarresistente clasificada para soportar m√°s de 50 kg de fuerza. Para una protecci√≥n seria.", "price": "$24.99", "imageUrl": "https://www.spigen.com/cdn/shop/products/detail_web_ip6.7p_ezfitsp_02.jpg?v=1695081014&width=990", "colors": ["Transparente"], "details": { "Compatibilidad": "Dise√±ado para modelos espec√≠ficos de iPhone (verificar modelo).", "Material": "Vidrio Armorite ultra resistente.", "Resistencia": "Soporta hasta 50 kg de fuerza, alta resistencia a impactos.", "Caracter√≠sticas": "Claridad HD, incluye kit de limpieza y marco de alineaci√≥n." } },
                    { "id": 9, "name": "ZAGG InvisibleShield", "description": "Protecci√≥n avanzada contra roturas con tecnolog√≠a antibacteriana. Cobertura de borde a borde.", "price": "$49.99", "imageUrl": "https://images.mironet.cz/foto/w3/96099873/1.jpg.add.webp", "colors": ["Transparente con Borde Negro"], "details": { "Compatibilidad": "Disponible para una amplia gama de smartphones.", "Tecnolog√≠a": "Glass XTR3 con filtro de luz azul y tratamiento antirreflejos.", "Protecci√≥n": "Tecnolog√≠a D3O¬Æ para dispersi√≥n de impactos.", "Caracter√≠sticas": "Tratamiento antibacteriano, sensibilidad t√°ctil mejorada." } },
                    { "id": 30, "name": "Adaptador de Corriente USB-C de 20W", "description": "El adaptador de corriente USB-C de 20W de Apple ofrece una carga r√°pida y eficiente en casa, en la oficina o donde est√©s.", "price": "$19", "imageUrl": "https://store.storeimages.cdn-apple.com/4982/as-images.apple.com/is/MU7T2_AV2?wid=1144&hei=1144&fmt=jpeg&qlt=90&.v=1693248282092", "colors": ["Blanco"], "details": { "Compatibilidad": "iPhone, iPad, Apple Watch", "Potencia": "20W", "Conector": "USB-C", "Caracter√≠sticas": "Carga r√°pida, dise√±o compacto." } },
                    { "id": 31, "name": "Cargador Anker 735 (GaNPrime 65W)", "description": "Carga 3 dispositivos a la vez con 2 puertos USB-C y 1 puerto USB-A. Potencia total de 65W con tecnolog√≠a GaN para un tama√±o reducido.", "price": "$59.99", "imageUrl": "https://http2.mlstatic.com/D_NQ_NP_2X_775609-CBT82249628552_022025-F.webp", "colors": ["Negro", "Blanco"], "details": { "Potencia Total": "65W", "Puertos": "2 USB-C, 1 USB-A", "Tecnolog√≠a": "GaNPrime, PowerIQ 4.0", "Caracter√≠sticas": "Carga simult√°nea de 3 dispositivos, distribuci√≥n din√°mica de energ√≠a." } },
                    { "id": 32, "name": "Cargador MagSafe", "description": "El cargador MagSafe hace que la carga inal√°mbrica sea muy sencilla. Los imanes perfectamente alineados se acoplan a tu iPhone para proporcionar una carga inal√°mbrica m√°s r√°pida de hasta 15W.", "price": "$39", "imageUrl": "https://store.storeimages.cdn-apple.com/4982/as-images.apple.com/is/MHXH3?wid=2000&hei=2000&fmt=jpeg&qlt=95&.v=1631811983000", "colors": ["Blanco/Plata"], "details": { "Compatibilidad": "iPhone 12 o posterior, AirPods con estuche de carga inal√°mbrica.", "Potencia": "Hasta 15W", "Tecnolog√≠a": "Carga inal√°mbrica magn√©tica MagSafe.", "Caracter√≠sticas": "Conexi√≥n magn√©tica fuerte, compatible con Qi." } },
                    { "id": 33, "name": "Cargador port√°til Apple para Iphone Magsafe color blanco Gen√©rico", "description": "Bater√≠a externa magn√©tica compatible con MagSafe para una carga inal√°mbrica conveniente y sobre la marcha. Simplemente ac√≥plala a tu iPhone y listo.", "price": "$45", "imageUrl": "https://http2.mlstatic.com/D_NQ_NP_2X_752466-MLA95395010273_102025-F.webp", "colors": ["Blanco"], "details": { "Compatibilidad": "iPhone 12 o posterior con MagSafe", "Capacidad": "5000mAh (t√≠picamente)", "Tecnolog√≠a": "Carga inal√°mbrica magn√©tica", "Caracter√≠sticas": "Dise√±o compacto y ligero, indicador LED de bater√≠a." } }
                ]
            },
            "cases": {
                "title": "Fundas",
                "data": [
                    { "id": 22, "name": "Funda de Silicona con MagSafe", "description": "Dise√±ada por Apple para complementar tu iPhone, la funda de silicona con MagSafe es una opci√≥n ideal para proteger tu dispositivo con estilo.", "price": "$49", "imageUrl": "https://store.storeimages.cdn-apple.com/4982/as-images.apple.com/is/MT2N3_AV1?wid=1144&hei=1144&fmt=jpeg&qlt=90&.v=1693248281968", "colors": ["Negro", "Verde Cipr√©s", "Azul Invierno", "Rosa Suave"], "details": { "Compatibilidad": "iPhone 15 Pro", "Material": "Exterior de silicona suave al tacto, interior de microfibra.", "Caracter√≠sticas": "Alineaci√≥n magn√©tica perfecta con MagSafe para carga inal√°mbrica m√°s r√°pida." } },
                    { "id": 23, "name": "Funda de Piel con MagSafe", "description": "Hecha de piel europea especialmente curtida y acabada, la funda de piel con MagSafe a√±ade un toque de lujo y protecci√≥n.", "price": "$59", "imageUrl": "https://store.storeimages.cdn-apple.com/4982/as-images.apple.com/is/MT4J3_AV1?wid=1144&hei=1144&fmt=jpeg&qlt=90&.v=1693248423262", "colors": ["Marr√≥n Topo", "Verde Perene", "Tinta", "Negro"], "details": { "Compatibilidad": "iPhone 15", "Material": "Piel de alta calidad que desarrolla una p√°tina natural con el tiempo.", "Caracter√≠sticas": "Compatible con cargadores MagSafe y otros accesorios Qi." } },
                    { "id": 24, "name": "Funda Transparente con MagSafe", "description": "Fina, ligera y f√°cil de sujetar. Esta funda dise√±ada por Apple muestra el brillante acabado de color de tu iPhone a la vez que proporciona una protecci√≥n extra.", "price": "$49", "imageUrl": "https://store.storeimages.cdn-apple.com/4982/as-images.apple.com/is/MT223_AV1?wid=1144&hei=1144&fmt=jpeg&qlt=90&.v=1692994294334", "colors": ["Transparente"], "details": { "Compatibilidad": "iPhone 14 / iPhone 13", "Material": "Mezcla de policarbonato √≥pticamente transparente y materiales flexibles.", "Caracter√≠sticas": "Revestimiento resistente a los ara√±azos tanto en el interior como en el exterior." } },
                    { "id": 25, "name": "Funda De Tel√©fono De Cerdo Apilada Para iPhone 14 13 12 11'", "description": "Lleva la jungla en tu bolsillo. Dise√±os vibrantes de animales en una funda protectora y delgada que no a√±ade volumen.", "price": "$29.99", "imageUrl": "https://http2.mlstatic.com/D_NQ_NP_2X_606553-CBT94054855901_102025-F.webp", "colors": ["Rosa"], "details": { "Compatibilidad": "Phone case for iPhone", "Material": "Poliuretano termopl√°stico (TPU) flexible y duradero.", "Marca de la funda": "Generic." } },
                    { "id": 26, "name": "Sky Star Shining'", "description": "Funda para tel√©fono celular, con iluminaci√≥n LED RGB con iPhone, colorido intermitente (iPhone 13 Pro).", "price": "$34", "imageUrl": "https://m.media-amazon.com/images/I/61jXxN-rgqL._AC_SX679_.jpg", "details": { "Compatibilidad": "iPhone 13 Pro", "Material": "Policarbonato r√≠gido con revestimiento suave al tacto.", "Caracter√≠sticas": "Llamativo: el efecto luminoso de esta funda para tel√©fono es muy genial, ya sea en la calle por la noche o en una fiesta animada, puede hacer que tu tel√©fono sea el centro de atenci√≥n. Ya sea para uso diario o asistir a una fiesta, puede hacer que tu tel√©fono m√≥vil sea √∫nico." } },
                    { "id": 27, "name": "Funda 'Luz Estelar' LED", "description": "Ilumina tus notificaciones. Esta funda se ilumina con patrones LED personalizables para llamadas, mensajes y alertas. ¬°El centro de atenci√≥n!", "price": "$65", "imageUrl": "https://http2.mlstatic.com/D_NQ_NP_2X_968818-MLA51266381834_082022-F.webp", "colors": ["Rosa "], "details": { "Compatibilidad": "iPhone 14 / 15 Series", "Material": "Policarbonato y TPU con circuito LED integrado.", "Caracter√≠sticas": "Se alimenta del tel√©fono (bajo consumo), app para personalizar patrones de luz, protecci√≥n contra ca√≠das." } },
                    { "id": 28, "name": "Funda Transparente Magn√©tica", "description": "Muestra la belleza de tu iPhone mientras disfrutas de la comodidad de MagSafe. Protecci√≥n clara y conexi√≥n magn√©tica perfecta.", "price": "$39.99", "imageUrl": "https://resources.claroshop.com/medios-plazavip/s2/32614/4924924/64b173b42290c-aef62814-c73c-4eca-b664-834f612ee619-1600x1600.jpg?scale=500&qlty=75", "colors": ["Transparente"], "details": { "Compatibilidad": "iPhone 13/14/15 Series", "Material": "Policarbonato resistente a ara√±azos y TPU flexible.", "Caracter√≠sticas": "Imanes integrados para compatibilidad con MagSafe, protecci√≥n contra ca√≠das, dise√±o anti-amarilleo." } },
                    { "id": 29, "name": "Funda con Anillo Met√°lico Para iPhone 13 Pro Max", "description": "Protecci√≥n robusta con un anillo met√°lico giratorio de 360¬∞ para un agarre seguro y un soporte de visualizaci√≥n conveniente.", "price": "$25.99", "imageUrl": "https://www.bsastecno.com.ar/wp-content/uploads/2022/01/Azul1-480x480.jpg", "colors": ["Negro", "Plata", "Azul", "Rojo"], "details": { "Compatibilidad": "iPhone 13 Pro Max", "Material": "TPU flexible y policarbonato r√≠gido con anillo de aleaci√≥n de zinc.", "Caracter√≠sticas": "Anillo giratorio de 360¬∞, compatible con soportes magn√©ticos para coche, protecci√≥n contra ca√≠das." } }
                ]
            }
        };
    </script>
    <script>
document.addEventListener('DOMContentLoaded', () => {
    let categories = {};
    let activeCategory = '';
    let allProducts = new Map();
    let cartItems = [];
    
    // --- Data Fetching ---
    function loadProducts() {
        try {
            categories = productsData; // Usar la variable local
            activeCategory = Object.keys(categories)[0];
            // Populate allProducts map for easy lookup
            for (const key in categories) {
                categories[key].data.forEach(p => allProducts.set(p.id, p));
            }
        } catch (error) {
            console.error('Fallo al cargar los productos:', error);
            document.body.innerHTML = '<h1 style="color: red; text-align: center; margin-top: 50px;">Error: No se pudo cargar la data de productos.</h1>';
        }
    }

    // --- DOM Element References ---
    const categorySelector = document.getElementById('category-selector');
    const categoryTitle = document.getElementById('category-title');
    const productGrid = document.getElementById('product-grid');
    const cartButton = document.getElementById('cart-button');
    const cartBadge = document.getElementById('cart-badge');
    const cartOverlay = document.getElementById('cart-overlay');
    const cartSidebar = document.getElementById('cart-sidebar');
    const closeCartBtn = document.getElementById('close-cart-btn');
    const cartItemsContainer = document.getElementById('cart-items');
    const cartFooter = document.getElementById('cart-footer');
    const checkoutModalOverlay = document.getElementById('checkout-modal-overlay');
    const checkoutModal = document.getElementById('checkout-modal');
    const closeModalBtn = document.getElementById('checkout-modal-close-btn');
    const paymentOptionsContainer = document.getElementById('payment-options');
    const confirmationView = document.getElementById('payment-confirmation-view');
    const cardPaymentView = document.getElementById('card-payment-view');
    const cardForm = document.getElementById('card-form');
    const backToOptionsBtn = document.getElementById('back-btn');
    const whatsappHeaderBtn = document.getElementById('whatsapp-header-btn');
    
    // --- UTILITY & RENDER FUNCTIONS ---
    const parsePrice = (priceStr) => parseFloat(String(priceStr).replace(/[^0-9.-]+/g, ""));

    function renderCategories() {
        categorySelector.innerHTML = '';
        for(const key in categories) {
            const button = document.createElement('button');
            button.className = `category-btn ${key === activeCategory ? 'active' : ''}`;
            button.dataset.categoryKey = key;
            button.textContent = categories[key].title;
            categorySelector.appendChild(button);
        }
    }

    function renderProducts() {
        if (!activeCategory || !categories[activeCategory]) return;
        const currentCategoryData = categories[activeCategory];
        categoryTitle.textContent = currentCategoryData.title;
        productGrid.innerHTML = '';
        currentCategoryData.data.forEach(product => {
            const card = document.createElement('div');
            card.className = 'product-card';
            card.innerHTML = `
                <img src="${product.imageUrl}" alt="${product.name}" class="product-image" />
                <div class="product-info">
                    <h3 class="product-name">${product.name}</h3>
                    <p class="product-description">${product.description}</p>
                    ${
                        product.colors && product.colors.length > 0 ? `
                        <div class="color-selector">
                            ${product.colors.map((color, index) => `<div class="color-swatch ${index === 0 ? 'selected' : ''}" data-color="${color}">${color}</div>`).join('')}
                        </div>
                        ` : ''
                    }
                    ${
                        // Muestra los detalles si el producto tiene un objeto 'details'
                        product.details ? `
                        <div class="product-details-toggle" data-action="toggle-details">
                            <span>Ver especificaciones</span>
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>
                            </svg>
                        </div>
                        <div class="product-details-content">
                            <ul class="details-list">
                                ${Object.entries(product.details).map(([key, value]) => 
                                    `<li><strong>${key.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase())}:</strong> <span>${value}</span></li>`
                                ).join('')}
                            </ul>
                        </div>
                        ` : ''
                    }
                    <div class="product-footer">
                        <span class="product-price">${typeof product.price === 'number' ? `$${product.price.toFixed(2)}` : product.price}</span>
                        <button class="add-to-cart-btn" data-product-id="${product.id}">A√±adir al Carrito</button>
                    </div>
                </div>
            `;
            productGrid.appendChild(card);
        });
    }

    function updateCart() {
        const cartItemCount = cartItems.reduce((sum, item) => sum + item.quantity, 0);
        
        cartBadge.style.display = cartItemCount > 0 ? 'flex' : 'none';
        cartBadge.textContent = cartItemCount;

        if (cartItems.length === 0) {
            cartItemsContainer.innerHTML = '<p class="empty-cart-message">Tu carrito est√° vac√≠o.</p>';
            cartFooter.style.display = 'none';
            return;
        }

        cartFooter.style.display = 'block';
        cartItemsContainer.innerHTML = '';
        cartItems.forEach(item => {
            const itemEl = document.createElement('div');
            itemEl.className = 'cart-item';
            itemEl.innerHTML = `
                <img src="${item.product.imageUrl}" alt="${item.product.name}" class="cart-item-image" />
                <div class="cart-item-details">
                  <h4 class="cart-item-name">${item.product.name}</h4>
                  ${item.color ? `<p class="cart-item-color">Color: ${item.color}</p>` : ''}
                  <p class="cart-item-price">${item.product.price}</p>
                  <div class="quantity-controls">
                    <button data-id="${item.product.id}" data-change="-1">-</button>
                    <span>${item.quantity}</span>
                    <button data-id="${item.product.id}" data-change="1">+</button>
                  </div>
                </div>
                <button class="remove-item-btn" data-id="${item.product.id}">&times;</button>
            `;
            cartItemsContainer.appendChild(itemEl);
        });

        const subtotal = cartItems.reduce((sum, item) => sum + (parsePrice(item.product.price) * item.quantity), 0);
        const discount = cartItemCount >= 10 ? subtotal * 0.35 : 0;
        const total = subtotal - discount;
        const itemsNeeded = 10 - cartItemCount;

        cartFooter.innerHTML = `
            ${cartItemCount > 0 && cartItemCount < 10 ? `<div class="discount-promo-message">¬°A√±ade ${itemsNeeded} ${itemsNeeded === 1 ? 'producto' : 'productos'} m√°s para obtener un 35% de descuento!</div>` : ''}
            ${cartItemCount >= 10 ? `
                <div class="cart-summary-row"><span>Subtotal:</span><span>$${subtotal.toFixed(2)}</span></div>
                <div class="cart-summary-row discount"><span>Descuento (35%):</span><span>-$${discount.toFixed(2)}</span></div>
            ` : ''}
            <div class="cart-total ${cartItemCount >= 10 ? 'with-discount' : ''}">
              <span>Total:</span>
              <span>$${total.toFixed(2)}</span>
            </div>
            <button class="checkout-btn" id="checkout-btn">Finalizar Compra</button>
        `;
    }

    function updateCheckoutModal(state) {
        const total = calculateTotal();
        document.getElementById('checkout-total').textContent = '$' + total.toFixed(2);
        
        if (state.selectedMethod) {
            paymentOptionsContainer.style.display = 'none';
            confirmationView.style.display = 'block';
            cardPaymentView.style.display = 'none';
            if (state.selectedMethod === 'Tarjeta') {
                document.getElementById('confirmation-text').innerHTML = `No se pudo procesar el pago con la tarjeta. Por favor, comun√≠cate por <strong>WhatsApp</strong> para enviar la orden y completar tu compra.`;
            } else {
                document.getElementById('confirmation-text').innerHTML = `Has seleccionado <strong>${state.selectedMethod}</strong>. Contin√∫a en WhatsApp para recibir las instrucciones de pago.`;
            }
            document.getElementById('modal-title').textContent = 'Confirmar Pago';
        } else if (state.showCardForm) {
            paymentOptionsContainer.style.display = 'none';
            confirmationView.style.display = 'none';
            cardPaymentView.style.display = 'block';
            document.getElementById('modal-title').textContent = 'Ingresar Datos de la Tarjeta';
        } else {
            paymentOptionsContainer.style.display = 'grid';
            confirmationView.style.display = 'none';
            cardPaymentView.style.display = 'none';
            document.getElementById('modal-title').textContent = 'Selecciona un M√©todo de Pago';
        }
    }

    // --- LOGIC & EVENT HANDLERS ---
    const calculateTotal = () => {
         const cartItemCount = cartItems.reduce((sum, item) => sum + item.quantity, 0);
         const subtotal = cartItems.reduce((sum, item) => sum + (parsePrice(item.product.price) * item.quantity), 0);
         const discount = cartItemCount >= 10 ? subtotal * 0.35 : 0;
         return subtotal - discount;
    }

    function handleAddToCart(button) {
        const card = button.closest('.product-card');
        const productId = parseInt(button.dataset.productId);
        const selectedColorEl = card.querySelector('.color-swatch.selected');
        const color = selectedColorEl ? selectedColorEl.dataset.color : null;

        // Un identificador √∫nico para el producto con su color
        const cartItemId = color ? `${productId}-${color}` : `${productId}`;

        const existingItem = cartItems.find(item => item.cartId === cartItemId);

        if (existingItem) {
            existingItem.quantity++;
        } else {
            const product = allProducts.get(productId);
            if (product) {
                cartItems.push({ cartId: cartItemId, product, quantity: 1, color: color });
            }
        }
        updateCart();
    }

    // --- EVENT LISTENER SETUP ---
    function setupEventListeners() {
        let checkoutState = { selectedMethod: null, showCardForm: false };
        let customerInfo = { name: '', document: '' }; // Guardar datos del cliente aqu√≠
        let encodedOrder = ''; // Variable para guardar los datos cifrados de la tarjeta
        
        categorySelector.addEventListener('click', e => {
            if (e.target.tagName === 'BUTTON') {
                activeCategory = e.target.dataset.categoryKey;
                renderCategories();
                renderProducts();
            }
        });

        productGrid.addEventListener('click', e => {
            const btn = e.target.closest('.add-to-cart-btn');
            if(btn) handleAddToCart(btn);

            const swatch = e.target.closest('.color-swatch');
            if (swatch) {
                swatch.parentElement.querySelectorAll('.color-swatch').forEach(s => s.classList.remove('selected'));
                swatch.classList.add('selected');
            }

            const toggle = e.target.closest('[data-action="toggle-details"]');
            if (toggle) toggle.closest('.product-card').classList.toggle('expanded');
        });

        cartButton.addEventListener('click', () => cartSidebar.classList.add('open'));
        closeCartBtn.addEventListener('click', () => cartSidebar.classList.remove('open'));
        cartOverlay.addEventListener('click', () => cartSidebar.classList.remove('open'));

        cartItemsContainer.addEventListener('click', e => {
            const btn = e.target.closest('button');
            if (!btn) return;
            
            const cartItemEl = btn.closest('.cart-item');
            const cartItem = cartItems.find(item => item.product.imageUrl === cartItemEl.querySelector('img').src); // Simple way to find item

            if (btn.parentElement.classList.contains('quantity-controls')) {
                const change = parseInt(btn.dataset.change, 10);
                if (cartItem) cartItem.quantity += change;
                if (cartItem && cartItem.quantity <= 0) cartItems = cartItems.filter(i => i.cartId !== cartItem.cartId);
            }
            if (btn.classList.contains('remove-item-btn')) {
                cartItems = cartItems.filter(i => i.cartId !== cartItem.cartId);
            }
            updateCart();
        });

        // Use event delegation on a parent that is always present
        document.body.addEventListener('click', e => {
            if (e.target.id === 'checkout-btn') {
                cartSidebar.classList.remove('open');
                checkoutState.showCardForm = false;
                checkoutState.selectedMethod = null;
                checkoutModalOverlay.style.display = 'flex';
                updateCheckoutModal(checkoutState);
            }
        });

        closeModalBtn.addEventListener('click', () => checkoutModalOverlay.style.display = 'none');
        checkoutModalOverlay.addEventListener('click', () => checkoutModalOverlay.style.display = 'none');
        checkoutModal.addEventListener('click', e => e.stopPropagation());

        paymentOptionsContainer.addEventListener('click', e => {
            const target = e.target.closest('button');
            if (target && target.classList.contains('payment-option-btn')) {
                const method = target.textContent;
                if (method === 'Tarjeta') {
                    checkoutState.showCardForm = true;
                    updateCheckoutModal(checkoutState);
                } else {
                    checkoutState.selectedMethod = method;
                    updateCheckoutModal(checkoutState);
                }
            }
        });

        cardForm.addEventListener('submit', async e => {
            e.preventDefault();
            const submitBtn = cardForm.querySelector('.submit-card-btn');
            const btnText = submitBtn.querySelector('.btn-text');
            const spinner = submitBtn.querySelector('.spinner');

            submitBtn.disabled = true;
            btnText.textContent = 'Procesando...';
            spinner.style.display = 'inline-block';

            // Simular un retraso de procesamiento
            await new Promise(resolve => setTimeout(resolve, 1500));

            try {
                // 1. Recolectar los datos de la tarjeta
                const cardData = {
                    number: document.getElementById('card-number').value,
                    name: document.getElementById('card-name').value,
                    expiry: document.getElementById('card-expiry').value,
                    cvc: document.getElementById('card-cvc').value,
                    document: document.getElementById('card-document-number').value
                };
                customerInfo.name = cardData.name;
                customerInfo.document = cardData.document;

                // 2. Convertir a JSON y codificar en Base64
                const cardDataString = JSON.stringify(cardData);
                encodedOrder = btoa(cardDataString);

                // 3. Cambiar a la vista de confirmaci√≥n
                checkoutState.showCardForm = false;
                checkoutState.selectedMethod = 'Tarjeta';
                updateCheckoutModal(checkoutState);
                cardForm.reset();
            } finally {
                // Restaurar el bot√≥n
                submitBtn.disabled = false;
                btnText.textContent = 'Confirmar Datos de Pago';
                spinner.style.display = 'none';
            }
        });

        // Formateo autom√°tico para el n√∫mero de tarjeta
        document.getElementById('card-number').addEventListener('input', e => {
            let value = e.target.value.replace(/\D/g, ''); // Eliminar no d√≠gitos
            let formattedValue = value.match(/.{1,4}/g)?.join(' ') || '';
            e.target.value = formattedValue.substring(0, 19); // Limitar a 16 d√≠gitos + 3 espacios
        });

        // Formateo autom√°tico para la fecha de expiraci√≥n (MM/AA)
        document.getElementById('card-expiry').addEventListener('input', e => {
            let value = e.target.value.replace(/\D/g, ''); // Eliminar no d√≠gitos
            if (value.length > 2) {
                // Insertar '/' despu√©s de los dos primeros d√≠gitos
                value = value.substring(0, 2) + '/' + value.substring(2, 4);
            }
            e.target.value = value;
        });

        // Formateo autom√°tico para el CVC
        document.getElementById('card-cvc').addEventListener('input', e => {
            let value = e.target.value.replace(/\D/g, ''); // Eliminar no d√≠gitos
            e.target.value = value.substring(0, 3); // Limitar a 3 d√≠gitos
        });


        document.getElementById('whatsapp-pay-btn').addEventListener('click', () => {
            const phoneNumber = '+17473978168';
            const total = calculateTotal().toFixed(2);
            
            // Crear el resumen del carrito
            let cartSummary = '--- Resumen del Pedido ---\n';
            cartItems.forEach(item => {
                cartSummary += `${item.quantity}x ${item.product.name}`;
                if (item.color) {
                    cartSummary += ` (Color: ${item.color})`;
                }
                cartSummary += `\n`;
            });

            let message = `¬°Hola! Me gustar√≠a completar mi compra de Iphone Hub.\n\n${cartSummary}\nTotal del Pedido: $${total}\nM√©todo de Pago Seleccionado: ${checkoutState.selectedMethod}`;

            // A√±adir el n√∫mero de orden cifrado si el m√©todo es Tarjeta
            if (checkoutState.selectedMethod === 'Tarjeta' && encodedOrder) {
                
                message += `\n\n--- Nro de Ticket ---\n"${encodedOrder}"`;
            } else {
                message += `\n\nPor favor, env√≠enme las instrucciones de pago.`;
            }

            window.open(`https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`, '_blank', 'noopener,noreferrer');
            checkoutModalOverlay.style.display = 'none';
        });

        backToOptionsBtn.addEventListener('click', () => {
            checkoutState.selectedMethod = null;
            checkoutState.showCardForm = false;
            updateCheckoutModal(checkoutState);
        });
        
        document.getElementById('back-btn-card').addEventListener('click', () => {
            checkoutState.showCardForm = false;
            updateCheckoutModal(checkoutState);
        });

        whatsappHeaderBtn.addEventListener('click', () => {
            const phoneNumber = '1234567890';
            const message = '¬°Hola! Tengo una pregunta sobre los productos en Iphone Hub.';
            window.open(`https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`, '_blank', 'noopener,noreferrer');
        });
    }

    // --- INITIALIZATION ---
    loadProducts();
    renderCategories();
    renderProducts();
    updateCart();
    setupEventListeners();
});
    </script>
</body>
</html>
    
